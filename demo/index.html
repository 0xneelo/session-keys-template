<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Symmio Session Keys - Demo</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="app">
    <!-- Header -->
    <header class="header">
      <div class="logo">
        <span class="logo-icon">ğŸ”</span>
        <span class="logo-text">Session Keys</span>
      </div>
      <div class="network-badge" id="networkBadge">
        <span class="network-dot"></span>
        <span id="networkName">Not Connected</span>
      </div>
    </header>

    <!-- Main Content -->
    <main class="main">
      <!-- Step 1: Create Session Key -->
      <section class="card" id="createKeySection">
        <div class="card-header">
          <span class="step-number">1</span>
          <h2>Create Session Key</h2>
        </div>
        <div class="card-content">
          <p class="description">
            Generate a new session key that will be stored encrypted in your browser.
            This key can sign transactions without exposing your main wallet.
          </p>
          
          <div class="form-group">
            <label for="password">Encryption Password</label>
            <input type="password" id="password" placeholder="Min 8 characters" minlength="8">
          </div>
          
          <div class="form-group">
            <label for="expiry">Key Expiry</label>
            <select id="expiry">
              <option value="3600">1 Hour</option>
              <option value="86400" selected>24 Hours</option>
              <option value="604800">7 Days</option>
            </select>
          </div>

          <div class="checkbox-group">
            <input type="checkbox" id="withMnemonic">
            <label for="withMnemonic">Generate with mnemonic backup</label>
          </div>

          <button class="btn btn-primary" id="createKeyBtn">
            <span class="btn-icon">âœ¨</span>
            Create Session Key
          </button>
        </div>
      </section>

      <!-- Session Key Info -->
      <section class="card" id="keyInfoSection" style="display: none;">
        <div class="card-header">
          <span class="step-number">âœ“</span>
          <h2>Your Session Key</h2>
          <span class="key-status" id="keyStatus">Locked</span>
        </div>
        <div class="card-content">
          <div class="key-details">
            <div class="key-field">
              <label>Address</label>
              <div class="address-display">
                <code id="keyAddress">-</code>
                <button class="btn-icon-only" onclick="copyToClipboard('keyAddress')" title="Copy">ğŸ“‹</button>
              </div>
            </div>
            <div class="key-field">
              <label>Balance</label>
              <div class="balance-display">
                <span id="keyBalance">0.0000</span> ETH
                <button class="btn-icon-only" onclick="refreshBalance()" title="Refresh">ğŸ”„</button>
              </div>
            </div>
            <div class="key-field">
              <label>Expires</label>
              <span id="keyExpiry">-</span>
            </div>
          </div>

          <!-- Mnemonic Display (only shown once) -->
          <div class="mnemonic-display" id="mnemonicDisplay" style="display: none;">
            <div class="mnemonic-warning">
              âš ï¸ Write down this phrase! It won't be shown again.
            </div>
            <div class="mnemonic-words" id="mnemonicWords"></div>
            <button class="btn btn-secondary" onclick="hideMnemonic()">I've saved it</button>
          </div>

          <div class="key-actions">
            <div class="form-group inline">
              <input type="password" id="unlockPassword" placeholder="Enter password to unlock">
              <button class="btn btn-secondary" id="unlockBtn">ğŸ”“ Unlock</button>
            </div>
            <button class="btn btn-danger" id="deleteKeyBtn">ğŸ—‘ï¸ Delete Key</button>
          </div>
        </div>
      </section>

      <!-- Step 2: Get Testnet ETH -->
      <section class="card" id="faucetSection">
        <div class="card-header">
          <span class="step-number">2</span>
          <h2>Get Testnet ETH</h2>
        </div>
        <div class="card-content">
          <p class="description">
            You'll need testnet ETH to send transactions. Use one of these faucets:
          </p>
          
          <div class="faucet-links">
            <a href="https://sepoliafaucet.com/" target="_blank" class="faucet-link">
              <span class="faucet-icon">ğŸš°</span>
              <div>
                <strong>Sepolia Faucet</strong>
                <span>sepoliafaucet.com</span>
              </div>
            </a>
            <a href="https://www.alchemy.com/faucets/ethereum-sepolia" target="_blank" class="faucet-link">
              <span class="faucet-icon">âš—ï¸</span>
              <div>
                <strong>Alchemy Faucet</strong>
                <span>alchemy.com</span>
              </div>
            </a>
            <a href="https://cloud.google.com/application/web3/faucet/ethereum/sepolia" target="_blank" class="faucet-link">
              <span class="faucet-icon">â˜ï¸</span>
              <div>
                <strong>Google Cloud Faucet</strong>
                <span>cloud.google.com</span>
              </div>
            </a>
          </div>
        </div>
      </section>

      <!-- Step 3: Sign Message -->
      <section class="card" id="signSection">
        <div class="card-header">
          <span class="step-number">3</span>
          <h2>Sign a Message</h2>
        </div>
        <div class="card-content">
          <p class="description">
            Test signing a message with your session key (no gas required).
          </p>
          
          <div class="form-group">
            <label for="messageToSign">Message</label>
            <textarea id="messageToSign" placeholder="Enter a message to sign...">Hello from Symmio Session Keys!</textarea>
          </div>

          <button class="btn btn-primary" id="signMessageBtn" disabled>
            <span class="btn-icon">âœï¸</span>
            Sign Message
          </button>

          <div class="signature-result" id="signatureResult" style="display: none;">
            <label>Signature</label>
            <code id="signatureOutput"></code>
          </div>
        </div>
      </section>

      <!-- Step 4: Send Transaction -->
      <section class="card" id="sendSection">
        <div class="card-header">
          <span class="step-number">4</span>
          <h2>Send Transaction</h2>
        </div>
        <div class="card-content">
          <p class="description">
            Send testnet ETH to the specified address using your session key.
          </p>
          
          <div class="form-group">
            <label for="recipientAddress">Recipient Address</label>
            <input type="text" id="recipientAddress" value="0x83B285E802D76055169B1C5e3bF21702B85b89Cb" readonly>
          </div>

          <div class="form-group">
            <label for="sendAmount">Amount (ETH)</label>
            <input type="number" id="sendAmount" value="0.001" step="0.0001" min="0">
          </div>

          <div class="form-group">
            <label for="txMessage">Message (optional - will be visible on Etherscan!)</label>
            <input type="text" id="txMessage" placeholder="e.g. Hello from Session Keys!" maxlength="100">
            <small class="input-hint">This message will be encoded in the transaction data</small>
          </div>

          <button class="btn btn-primary" id="sendTxBtn" disabled>
            <span class="btn-icon">ğŸ“¤</span>
            Send Transaction
          </button>

          <div class="tx-result" id="txResult" style="display: none;">
            <div class="tx-status" id="txStatus"></div>
            <a href="#" id="txLink" target="_blank" class="tx-link">View on Etherscan â†’</a>
          </div>
        </div>
      </section>
    </main>

    <!-- Toast Notifications -->
    <div class="toast-container" id="toastContainer"></div>
  </div>

  <!-- Scripts -->
  <script type="module" src="app.js"></script>
</body>
</html>
